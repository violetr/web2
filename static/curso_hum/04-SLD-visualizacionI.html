<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Visualización</title>
    <meta charset="utf-8" />
    <meta name="date" content="2021-02-04" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




background-color: #272822

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


&lt;h1 style='color:white'&gt; &lt;center&gt; R para contextos humanitarios de emergencia&lt;/center&gt;&lt;/h1&gt; 
## &lt;center&gt;&lt;font style='color:#E495A5'&gt;V&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;i&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;s&lt;/font&gt;&lt;font style='color:#96B56C'&gt;u&lt;/font&gt;&lt;font style='color:#65BC8C'&gt;a&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;l&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;i&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;z&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;a&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;c&lt;/font&gt;&lt;font style='color:#E495A5'&gt;i&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;ó&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;n&lt;/font&gt; &lt;font style='color:#96B56C'&gt;d&lt;/font&gt;&lt;font style='color:#65BC8C'&gt;e&lt;/font&gt; &lt;font style='color:#39BEB1'&gt;d&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;a&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;t&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;o&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;s&lt;/font&gt; &lt;font style='color:#E495A5'&gt;I&lt;/font&gt;&lt;/center&gt; 
### &lt;center&gt;&lt;font style='color:#E495A5'&gt;V&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;i&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;o&lt;/font&gt;&lt;font style='color:#96B56C'&gt;l&lt;/font&gt;&lt;font style='color:#65BC8C'&gt;e&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;t&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;a&lt;/font&gt; &lt;font style='color:#91ACE1'&gt;R&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;o&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;i&lt;/font&gt;&lt;font style='color:#E495A5'&gt;z&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;m&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;a&lt;/font&gt;&lt;font style='color:#96B56C'&gt;n&lt;/font&gt;&lt;/center&gt;
---

background-color: #272822

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


&lt;h1 style='color:white'&gt; &lt;center&gt; Abrir el archivo 04-EJ-visualizacion.Rmd&lt;/center&gt;&lt;/h1&gt; 
## &lt;center&gt;&lt;font style='color:#E495A5'&gt;P&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;a&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;r&lt;/font&gt;&lt;font style='color:#96B56C'&gt;a&lt;/font&gt; &lt;font style='color:#65BC8C'&gt;i&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;r&lt;/font&gt; &lt;font style='color:#55B8D0'&gt;h&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;a&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;c&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;i&lt;/font&gt;&lt;font style='color:#E495A5'&gt;e&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;n&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;d&lt;/font&gt;&lt;font style='color:#96B56C'&gt;o&lt;/font&gt; &lt;font style='color:#65BC8C'&gt;l&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;o&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;s&lt;/font&gt; &lt;font style='color:#91ACE1'&gt;E&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;J&lt;/font&gt;&lt;/center&gt; 


---

&lt;div class="my-header"&gt;&lt;/div&gt;
## Visualización de datos


&lt;center&gt;&lt;img src="img/ggplot2_obra_maestra.png"  width="700"&gt;&lt;/center&gt;
&lt;p style="color: gray; font-size:15px"&gt; Ilustración de Allison Horst.
&lt;/p&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Ejemplos:

&lt;img src="04-SLD-visualizacionI_files/figure-html/unnamed-chunk-3-1.png" width="648" /&gt;
---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Ejemplos:

&lt;img src="04-SLD-visualizacionI_files/figure-html/unnamed-chunk-4-1.png" width="648" /&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Ejemplos:

&lt;center&gt;&lt;img src="img/mapa1_ejemplo.png"  height="500"&gt;&lt;/center&gt;

&lt;p style="color: gray; font-size:15px"&gt; Visualización de Cédric Scherer.
&lt;/p&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Ejemplos:

&lt;center&gt;&lt;img src="img/ggplot2-carbonprint.png"  height="500"&gt;&lt;/center&gt;
&lt;p style="color: gray; font-size:15px"&gt; Visualización de Cédric Scherer.
&lt;/p&gt;
---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Los datos: campamentos en Haití 

Ahora vamos ver algunos ejemplos con un dataset de los campamentos de Haití




```r
str(haiti)
```

```
## tibble [23 x 18] (S3: tbl_df/tbl/data.frame)
##  $ SSID                               : chr [1:23] "121_03_326" "116_03_001" "114_05_353" "118_03_027" ...
##  $ Commune                            : chr [1:23] "LEOGANE" "GRESSIER" "PETION-VILLE" "TABARRE" ...
##  $ CampName                           : chr [1:23] "MOPAL" "Teren de la Kolin" "Tabarre ISA" "Centre Refugies Hatiens" ...
##  $ Latitude                           : num [1:23] 18.5 18.5 18.5 18.6 18.6 ...
##  $ Longitude                          : num [1:23] -72.6 -72.6 -72.2 -72.3 -72.2 ...
##  $ Households                         : num [1:23] 6 139 546 260 11 458 328 417 900 67 ...
##  $ Individuals                        : num [1:23] 28 604 2894 1237 45 ...
##  $ #Shelters                          : num [1:23] 6 139 553 224 28 584 328 445 898 69 ...
##  $ Percent_TShelter                   : num [1:23] 0 0 100 100 100 0 0 70 100 100 ...
##  $ CMA Presence                       : chr [1:23] "No" "No" "No" "No" ...
##  $ Committee Presence                 : chr [1:23] "Yes" "Yes" "Yes" "Yes" ...
##  $ Presence of Toilets                : chr [1:23] "Yes Toilets" "Yes Toilets" "No Toilets" "Yes Toilets" ...
##  $ Water Provision                    : chr [1:23] "No Water" "No Water" "No Water" "Yes Water" ...
##  $ Committee for Water                : chr [1:23] "NO" "NO" "NO" "NO" ...
##  $ Presence of Bathing                : chr [1:23] "No Bathing" "No Bathing" "No Bathing" "No Bathing" ...
##  $ Waste Management                   : chr [1:23] "No Waste" "No Waste" "No Waste" "No Waste" ...
##  $ Committee for Garbage              : chr [1:23] "NO" "NO" "NO" "NO" ...
##  $ Other Organization provide Services: chr [1:23] "No Other Service" "No Other Service" "No Other Service" "No Other Service" ...
```


---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Los datos: campamentos en Haití

Variables:

- Comuna
- Nombre del campamento
- Latitud 
- Longitud
- Cantidad de Viviendas
- Cantidad de Individuos
- Provisión de Agua
- Presencia de Sanitarios
- etc.

Que relación pensamos que debería haber entre Cantidad de Viviendas y Cantidad de Individuos?

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Código `ggplot2`

![](img/templateggplot21.png)

**Plantilla para cualquier gráfico:**

![](img/templateggplot22.png)

---
&lt;div class="my-header"&gt;&lt;/div&gt;
##  Algunas propiedades estéticas posibles

- Ejes (x, y,...)
- color (color de borde o de cosas sin relleno como punto o línea)
- fill (color de relleno)
- shape (por ejemplo para dispersión, círculo, triángulo, equis)
- size (tamaño)
- alpha (transparencia)

## Según el tipo de variable y de gráfico

- numérica continua
- categórica
- texto

---
&lt;div class="my-header"&gt;&lt;/div&gt;

##  Color

Supongamos que queremos distinguir además cuales de estos campamentos tienen Provisión de Agua

.pull-left[
&lt;center&gt;&lt;b&gt;Espacio Visual&lt;/b&gt;&lt;/center&gt;
&lt;center&gt;Color&lt;/center&gt;

&lt;br&gt;



&lt;center&gt;
&lt;p style="color:#F8766D"&gt;
rojo
&lt;/p&gt;
&lt;/center&gt;

&lt;center&gt;
&lt;p style="color:#00BFC4"&gt;
azul&lt;/p&gt;
&lt;/center&gt;

]

.pull-right[
&lt;center&gt;&lt;b&gt;Espacio de los datos&lt;/b&gt;&lt;/center&gt;
&lt;center&gt;Provision de Agua&lt;/center&gt;

&lt;br&gt;

&lt;center&gt;
&lt;p&gt;No&lt;/p&gt;
&lt;/center&gt;

&lt;center&gt;
&lt;p&gt;Yes&lt;/p&gt;
&lt;/center&gt;


]

---
&lt;div class="my-header"&gt;&lt;/div&gt;

##  Mapear provisión de agua


```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, 
                           y = Individuals,
                           color = `Water Provision`))
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;

La leyenda se agrega automáticamente

---
&lt;div class="my-header"&gt;&lt;/div&gt;

##  Mapear provisión de agua


```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, 
                           y = Individuals,
                           shape = `Water Provision`))
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

La leyenda se agrega automáticamente

---
&lt;div class="my-header"&gt;&lt;/div&gt;

##  Mapear provisión de agua


```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, 
                           y = Individuals,
                           size = `Water Provision`))
```

```
## Warning: Using size for a discrete variable is not advised.
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;

La leyenda se agrega automáticamente

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Cómo hacer este gráfico?

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

**Encuesta:** [PollEv.com/violetaroizm482](PollEv.com/violetaroizm482)

a)

```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, y = Individuals),
             color = "blue")
```

b)

```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, y = Individuals),
             color = "red")
```

c)

```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, y = Individuals, color = "blue")
```

d)

```r
ggplot(data = haiti) +
  geom_point(mapping = aes(x = Households, y = Individuals, color = "red"))
```



---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Como hacer este gráfico?


```r
ggplot(data = haiti) + 
  geom_point(mapping = aes(x = Households, 
                           y = Individuals, 
                           color = "blue"))
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Como hacer este gráfico?

Si quiero indicar una característica estética NO linkeada a variable, entonces lo indico AFUERA del aes()


```r
ggplot(data = haiti) + 
  geom_point(mapping = aes(x = Households, 
                           y = Individuals), 
             color = "blue")
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Que tienen de distinto estos dos gráficos?

.pull-left[
![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

]

.pull-right[
![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

]

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Que tienen de distinto estos dos gráficos?

.pull-left[
![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;

]

.pull-right[
![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

]

Mismos datos, mismo mapeo de aesthetics pero distinto geom

`geom_point` y `geom_smooth`

---
&lt;div class="my-header"&gt;&lt;/div&gt;

# Tu turno 1

Reproducir este histograma de la distribución de la cantidad de personas que viven en el hogar del entrevistado (variable `b10_tamanio_hogar`) con la ayuda de la guía rápida de `ggplot2`. Usa `geom_histogram`.

Ayuda: no utilizar la variable `y`




![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

# Tu turno 2

Reproducir este gráfico de barras que grafica la cantidad de encuestados por cada departamento. Utiliza la ayuda de la guía rápida de `ggplot2`. Usa `geom_bar`.

Ayuda: no utilizar la variable `y`

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Gráficos de barras 



```r
ggplot(data_4ta_Ronda) +
  geom_bar(aes(b6_departamento, color = b6_departamento))
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Gráficos de barras



```r
ggplot(data_4ta_Ronda) +
  geom_bar(aes(b6_departamento, fill = b6_departamento))
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;
---
&lt;div class="my-header"&gt;&lt;/div&gt;

# Gráficos de barras



```r
ggplot(data_4ta_Ronda) +
  geom_bar(aes(b6_departamento, fill = b6_departamento)) + 
  coord_flip()
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;
---
&lt;div class="my-header"&gt;&lt;/div&gt;

# Gráficos de barras



```r
ggplot(data_4ta_Ronda) +
  geom_bar(aes(b6_departamento, fill = b6_departamento)) + 
  labs(y = "cantidad", x = "") +
  coord_flip() +
  theme_minimal() +
  theme(legend.position = "none")
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;


---
&lt;div class="my-header"&gt;&lt;/div&gt;

# Tu turno 3

Predice la salida del siguiente código


```r
ggplot(data = haiti) + 
  geom_point(mapping = aes(x = Households, y = Individuals)) +
  geom_smooth(mapping = aes(x = Households, y = Individuals))
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Varias capas

Cada nuevo `geom_...` agrega una capa


```r
ggplot(data = haiti) + 
  geom_point(mapping = aes(x = Households, y = Individuals)) +
  geom_smooth(mapping = aes(x = Households, y = Individuals))
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Mapeos globales vs mapeos locales

Podemos mapear características estéticas para todos los geoms así


```r
ggplot(data = haiti, mapping = aes(x = Households, y = Individuals)) + 
  geom_point() +
  geom_smooth()
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Mapeos globales vs mapeos locales

Podemos agregar mapeos locales así


```r
ggplot(data = haiti, mapping = aes(x = Households, y = Individuals)) + 
  geom_point(mapping = aes(color = `Water Provision`)) +
  geom_smooth()
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-31-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Mapeos globales vs mapeos locales

Que sucede aquí?


```r
ggplot(data = haiti, mapping = aes(x = Households, y = Individuals,
                                   color = `Water Provision`)) + 
  geom_point() +
  geom_smooth()
```

```
## Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning -
## Inf
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-32-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Mapeos globales vs mapeos locales

Incluso, podemos hacer mapeos locales de datos:


```r
ggplot(data = haiti, mapping = aes(x = Households, 
                                   y = Individuals)) + 
  geom_point(aes(color = `Water Provision`)) +
  geom_smooth(data = filter(haiti, Households &lt; 500))
```

```
## `geom_smooth()` using method = 'loess' and formula 'y ~ x'
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Salvar gráficos

La función `ggsave` salva el último gráfico generado

Debemos especificar el nombre del archivo

En general indicaremos un path relativo


```r
ggsave("data/my-plot.pdf")
ggsave("data/my-plot.png")
```

El tamaño default en general no es muy bueno. Podemos indicar las dimensiones


```r
ggsave("data/my-plot.pdf", width = 6, height = 6)
```

**Tu turno 4:** Salva tu último gráfico en la carpeta img de tu proyecto

Si por algún motivo no estás en un proyecto, vuelve al proyecto del curso


---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Más gráficos

Volvamos a la tabla de decisiones de pedidos de asilos en Colombia





```r
decisiones
```

```
## # A tibble: 133 x 16
##     Anio `Codigo Pais Or~ `Codigo Pais As~ `Nombre Pais de~ `Nombre Pais As~
##    &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           
##  1  2002 CUB              COL              Cuba             Colombia        
##  2  2002 IRQ              COL              Iraq             Colombia        
##  3  2003 IRN              COL              Iran (Islamic R~ Colombia        
##  4  2003 IRN              COL              Iran (Islamic R~ Colombia        
##  5  2003 VEN              COL              Venezuela (Boli~ Colombia        
##  6  2004 CUB              COL              Cuba             Colombia        
##  7  2004 PER              COL              Peru             Colombia        
##  8  2004 UZB              COL              Uzbekistan       Colombia        
##  9  2005 CUB              COL              Cuba             Colombia        
## 10  2005 CUB              COL              Cuba             Colombia        
## # ... with 123 more rows, and 11 more variables: `Tipo de procedimiento` &lt;chr&gt;,
## #   `Nombre del Procedimiento` &lt;chr&gt;, `Codigo de Tipo de Decision` &lt;chr&gt;, `Tipo
## #   de Datos de Decision` &lt;chr&gt;, `Datos de Decision` &lt;chr&gt;, `Promedio de
## #   Personas de decision por Caso` &lt;dbl&gt;, Reconocidas &lt;dbl&gt;, `Proteccion
## #   Complementaria` &lt;dbl&gt;, `Cerradas de otra forma` &lt;dbl&gt;, Rechazadas &lt;dbl&gt;,
## #   total &lt;dbl&gt;
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Series de tiempo

Podemos graficar una variable a lo largo del tiempo para detectar tendencias, eventos y sus consecuencias

&lt;center&gt;&lt;img src="img/series_tiempo.png"  height="460"&gt;&lt;/center&gt;

---
## Series de tiempo

Podemos graficar una variable a lo largo del tiempo para detectar tendencias, eventos y sus consecuencias

&lt;center&gt;&lt;img src="img/grafico_autoras_mujeres.jfif"  height="460"&gt;&lt;/center&gt;

---

&lt;div class="my-header"&gt;&lt;/div&gt;

## Series de tiempo

Podemos graficar una variable a lo largo del tiempo con una línea 

Utilizamos `geom_line`


```r
decisiones %&gt;%
  filter(`Codigo Pais Origen` == "VEN") %&gt;%
  ggplot() +
    geom_line(aes(Anio, total))
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-38-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Tu turno 5:


Modifica el gráfico anterior para que la línea sea roja y cambia su grosor

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-39-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Gráficos por paneles

A veces es más claro si tenemos varios paneles, uno para cada valor de una variable categórica/discreta

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-40-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Gráficos por paneles 


Para eso agregamos una capa llamada `facet_*`

- `facet_wrap`
- `facet_grid`

Por default las escalas son las mismas

En caso de que tenga sentido cambiarlas podemos agregar `scales="free"` como opción

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Gráficos por paneles 

Podemos obtener el gráfico anterior de la siguiente forma:


```r
decisiones %&gt;%
  filter(`Codigo Pais Origen` %in% c("VEN", "ECU", "CUB")) %&gt;%
  ggplot() +
  geom_line(aes(Anio, total, color = `Codigo Pais Origen`)) +
  facet_wrap(~ `Codigo Pais Origen`,)
```

puedes indicar el numero de columnas y de filas

Incluso, podemos generar paneles basados en dos variables categóricas


```r
ggplot() +
  geom_*(aes(...)) +
  facet_grid(var1 ~ var2)
```


---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Tu Turno 6:

1. Con la ayuda de la guía rapida intenta reproducir este gráfico que indica con una línea punteada el año del importante terremoto en Haití. ¿Puedes cambiarlo por algún otro evento relevante para este gráfico?

2. Quita la línea y modifícalo para que se vea en paneles 

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-43-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Combinando gráficos: `patchwork`

El paquete `patchwork` es muy útil para combinar gráficos

Al igual que los datos y los vectores, los gráficos también pueden guardarse en una variable


```r
g1 &lt;- ggplot(data_4ta_Ronda) +
  geom_histogram(aes(b10_tamano_hogar),binwidth = 1)
```


```r
g2 &lt;- ggplot(data_4ta_Ronda) +
  geom_bar(aes(b6_departamento, fill = b6_departamento)) +
  coord_flip() +
  theme(legend.position = "none")
```



```r
g3 &lt;- ggplot(data_4ta_Ronda) +
  geom_point(aes(b10_tamano_hogar, e1_total))
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Combinando gráficos: `patchwork`


```r
#install.packages("patchwork")
library(patchwork)
g1 + g2
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-47-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Combinando gráficos: `patchwork`


```r
#install.packages("patchwork")
library(patchwork)
(g1 | g3) /
   g2
```

![](04-SLD-visualizacionI_files/figure-html/unnamed-chunk-48-1.png)&lt;!-- --&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## DESAFIO 2 

1. Trabajemos un poco más con la encuesta del dataset `data_4taronda` 

2. ¿Cuántas personas respondieron la encuesta?

3. Representa un gráfico de barras que represente el nivel educativo de los encuestados

3. Representa un gráfico de la cantidad de personas con trabajo en el hogar en función de la cantidad de personas del hogar

3. Representa un gráfico por paneles de la distribución de la cantidad de personas que viven en un hogar que discrimine según departamento


---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Resumen

- elegir un dataset

**data**

- elegir un gráfico adecuado

**geom_**

- mapear las variables con las propiedades estéticas

**aes()**

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Para seguir

Puedo hacer muuuchas cosas con `ggplot2`

- [R para Ciencia de Datos](https://es.r4ds.hadley.nz/)

- [ggplot2: elegant graphics for data analysis](https://ggplot2-book.org/)

- [Data Visualization - A practical introduction](https://socviz.co/)

Un poco más sobre como arreglar gráficos para publicar: 

- Títulos y otros textos
- Etiquetas
- Temas
- Colores

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Licencia y material usado

Licencia: [Creative Commons Attribution-ShareAlike 4.0 International License](https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES).

Este material está inspirado y utiliza explicaciones de:

- [R para Clima](https://eliocamp.github.io/r-clima/) de Paola Corrales y Elio Campitelli

- [Master the Tidyverse](https://github.com/rstudio-education/master-the-tidyverse-instructors) de Garrett Grolemund
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "13:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
