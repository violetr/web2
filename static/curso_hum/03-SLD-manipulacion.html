<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Manipulacion I</title>
    <meta charset="utf-8" />
    <meta name="date" content="2020-11-25" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




background-color: #272822

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


&lt;h1 style='color:white'&gt; &lt;center&gt; R para contextos humanitarios de emergencia&lt;/center&gt;&lt;/h1&gt; 
## &lt;center&gt;&lt;font style='color:#E495A5'&gt;M&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;a&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;n&lt;/font&gt;&lt;font style='color:#96B56C'&gt;i&lt;/font&gt;&lt;font style='color:#65BC8C'&gt;p&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;u&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;l&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;a&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;c&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;i&lt;/font&gt;&lt;font style='color:#E495A5'&gt;ó&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;n&lt;/font&gt; &lt;font style='color:#BDAB66'&gt;d&lt;/font&gt;&lt;font style='color:#96B56C'&gt;e&lt;/font&gt; &lt;font style='color:#65BC8C'&gt;d&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;a&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;t&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;o&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;s&lt;/font&gt; &lt;font style='color:#DE94C8'&gt;I&lt;/font&gt;&lt;/center&gt; 
### &lt;center&gt;&lt;font style='color:#E495A5'&gt;2&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;5&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;-&lt;/font&gt;&lt;font style='color:#96B56C'&gt;1&lt;/font&gt;&lt;font style='color:#65BC8C'&gt;1&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;-&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;2&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;0&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;2&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;0&lt;/font&gt;&lt;/center&gt;
---

background-color: #272822

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


&lt;h1 style='color:white'&gt; &lt;center&gt; Abrir el archivo 03-EJ-manipulacion.Rmd&lt;/center&gt;&lt;/h1&gt; 
## &lt;center&gt;&lt;font style='color:#E495A5'&gt;P&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;a&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;r&lt;/font&gt;&lt;font style='color:#96B56C'&gt;a&lt;/font&gt; &lt;font style='color:#65BC8C'&gt;i&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;r&lt;/font&gt; &lt;font style='color:#55B8D0'&gt;h&lt;/font&gt;&lt;font style='color:#91ACE1'&gt;a&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;c&lt;/font&gt;&lt;font style='color:#DE94C8'&gt;i&lt;/font&gt;&lt;font style='color:#E495A5'&gt;e&lt;/font&gt;&lt;font style='color:#D89F7F'&gt;n&lt;/font&gt;&lt;font style='color:#BDAB66'&gt;d&lt;/font&gt;&lt;font style='color:#96B56C'&gt;o&lt;/font&gt; &lt;font style='color:#65BC8C'&gt;l&lt;/font&gt;&lt;font style='color:#39BEB1'&gt;o&lt;/font&gt;&lt;font style='color:#55B8D0'&gt;s&lt;/font&gt; &lt;font style='color:#91ACE1'&gt;E&lt;/font&gt;&lt;font style='color:#C29DDE'&gt;J&lt;/font&gt;&lt;/center&gt; 

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Manipulación de datos

El paquete `dplyr` provee una enorme cantidad de funciones útiles para manipular datos

&lt;center&gt; &lt;img src="img/hex-dplyr.png" alt="Hex stickers" height="100"&gt;&lt;/center&gt;


Las funciones más comunes:

- `select()`: selecciona columnas de una tabla

- `filter()` y `slice()`: selecciona (o filtra) filas de una tabla

- `mutate()`: agrega nuevas columnas a una tabla

- `arrange()`: ordena las filas según los valores de una columna

- `group_by()`: agrupa una tabla en base al valor de una o más columnas

- `summarise()`: calcula estadísticas para cada grupo de una tabla.

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## `dplyr` y tablas dinámicas

A rasgos generales, las operaciones de `dplyr` permiten hacer lo que se hace en tablas dinámicas (pivot tables) en Excel. 


.pull-left[
Funcion de `dplyr`
- `filter()` 
- `group_by()`
- `select()`
- `summarise()`
]

.pull-right[
Sección de tabla dinámica

- "Filtros"
- "Filas"
-  "Columnas"
- "Valores"
]

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Tu turno 1

Te dieron una tabla con datos de temperatura mínima y máxima para distintas estaciones meteorológicas de todo el país durante los 365 días de un año. Las columnas son: id_estacion, temperatura_maxima, temperatura_minima y provincia. En base a esos datos, te piden que computes la temperatura media anual de cada estación únicamente de las estaciones de Cusco.

¿En qué orden ejecutarías estos pasos para obtener el resultado deseado?

- usar `summarise()` para calcular la estadística mean(temperatura_media) para cada id_estacion
- usar `group_by()` para agrupar por la columna id_estacion
- usar `mutate()` para agregar una columna llamada temperatura_media que sea 
`(temperatura_minima + temperatura_maxima)/2`
- usar `filter()` para seleccionar solo las filas donde la columnas provincia es igual a "Cusco"

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Los datos

Retomamos el dataset sobre decisiones de Perú frente a los pedidos de asilo 

(es una traducción y simplificación del dataset de UNHCR sobre decisiones de Perú: [https://data.humdata.org/dataset/unhcr-population-data-for-per](https://data.humdata.org/dataset/unhcr-population-data-for-per))


```r
decisiones &lt;- read_csv("data/decisiones_asilo_peru.csv")
decisiones
```

```
## # A tibble: 164 x 15
##     Anio `Codigo Pais Or~ `Codigo Pais As~ `Nombre Pais de~ `Nombre Pais As~
##    &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           
##  1  2000 COL              PER              Colombia         Peru            
##  2  2000 CUB              PER              Cuba             Peru            
##  3  2001 RUS              PER              Russian Federat~ Peru            
##  4  2002 COL              PER              Colombia         Peru            
##  5  2002 CUB              PER              Cuba             Peru            
##  6  2003 ARG              PER              Argentina        Peru            
##  7  2003 COL              PER              Colombia         Peru            
##  8  2003 CUB              PER              Cuba             Peru            
##  9  2003 PSE              PER              State of Palest~ Peru            
## 10  2003 IRQ              PER              Iraq             Peru            
## # ... with 154 more rows, and 10 more variables: `Tipo de procedimiento` &lt;chr&gt;,
## #   `Nombre del Procedimiento` &lt;chr&gt;, `Codigo de Tipo de Decision` &lt;chr&gt;, `Tipo
## #   de Datos de Decision` &lt;chr&gt;, `Datos de Decision` &lt;chr&gt;, `Promedio de
## #   Personas de decision por Caso` &lt;dbl&gt;, Reconocidas &lt;dbl&gt;, `Proteccion
## #   Complementaria` &lt;dbl&gt;, `Cerradas de otra forma` &lt;dbl&gt;, Rechazadas &lt;dbl&gt;
```



---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Seleccionando columnas: función `select()`

Si nos interesan menos columnas podemos usar `select()` así:

&gt; `select(dataset, c(columna1, columna4))`

o por número de columnas `select(dataset, c(1, 4))`. También podemos excluir un conjunto de columnas:

&gt; `select(dataset, -c(columna1, columna2))`

Supongamos que solo nos interesan: año, país de origen, decisión tomada(4)

Entonces redefinimos el dataset de la siguiente forma


```r
decisiones &lt;- select(decisiones, 
                     c(Anio, `Codigo Pais Origen`, Reconocidas, Rechazadas,
                       `Proteccion Complementaria`, `Cerradas de otra forma`))
decisiones
```

```
## # A tibble: 164 x 6
##     Anio `Codigo Pais Or~ Reconocidas Rechazadas `Proteccion Com~
##    &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;
##  1  2000 COL                        0          0                0
##  2  2000 CUB                        0         10                0
##  3  2001 RUS                        5          0                0
##  4  2002 COL                        5          5                0
##  5  2002 CUB                        5          0                0
##  6  2003 ARG                        0          0                0
##  7  2003 COL                       19          0                0
##  8  2003 CUB                        0          0                0
##  9  2003 PSE                        5          0                0
## 10  2003 IRQ                        5          0                0
## # ... with 154 more rows, and 1 more variable: `Cerradas de otra forma` &lt;dbl&gt;
```
---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Seleccionando filas: funcion `filter()`

Supongamos que solo nos interesan los pedidos provenientes de Venezuela

Podemos usar la función filter mas una condición lógica

&gt; filter(dataset, condicion)

En este caso seria:


```r
decisiones_venezuela &lt;- filter(decisiones, `Codigo Pais Origen`=="VEN")
decisiones_venezuela
```

```
## # A tibble: 11 x 6
##     Anio `Codigo Pais Or~ Reconocidas Rechazadas `Proteccion Com~
##    &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;
##  1  2007 VEN                        5          0                0
##  2  2008 VEN                        5          0                0
##  3  2009 VEN                        5          0                0
##  4  2011 VEN                        5          0                0
##  5  2012 VEN                        5          5                0
##  6  2014 VEN                        5         14                0
##  7  2015 VEN                       71         51                0
##  8  2016 VEN                       64         69                0
##  9  2017 VEN                      102        412                0
## 10  2018 VEN                      390        191                0
## 11  2019 VEN                      578        171                0
## # ... with 1 more variable: `Cerradas de otra forma` &lt;dbl&gt;
```
---
&lt;div class="my-header"&gt;&lt;/div&gt;
## funcion `filter()`: condiciones

Las condiciones para `filter()` pueden expresarse en función de una columna del dataset o de un vector de longitud igual a la cantidad de filas del dataset.

Si quiero las decisiones tomadas después de 2010:


```r
decisiones_despues_2010 &lt;- filter(decisiones, Anio &gt; 2010)
```

Si quiero cualquier decisión menos las de los años 2010 y 2015: 


```r
decisiones_2010_2015 &lt;- filter(decisiones, Anio %in% c(2010, 2015))
```

Si quiero solo las entradas de donde se rechazaron más que las que se aceptaron: 


```r
decisiones_mas_rechazos &lt;- filter(decisiones, Rechazadas &gt; Reconocidas)
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Tu turno 2: verbos `select` y `filter`

1. Seleccionar solo las variables Anio, `Codigo Pais Origen `

2. Filtrar las entradas de los países Turquía y Argentina

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Creando nuevas variables: función `mutate()`

&lt;center&gt;&lt;img src="img/dplyr_mutate_es.png" alt="Hex stickers" height="450"&gt;&lt;/center&gt;



---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Creando nuevas variables: función `mutate()`

- Queremos agregar a `decisiones` una columna con el total de pedidos de asilo correspondientes a cada fila (mas allá de la decisión tomada). 

- Podemos definirla como la suma de las posibles decisiones


```r
decisiones &lt;- mutate(decisiones,
                     total = Reconocidas + 
                       `Proteccion Complementaria` +
                       `Cerradas de otra forma` + 
                       Rechazadas)
#View(decisiones)
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Tu turno 3: verbo `mutate`

1. Generar una nueva columna que indique para cada fila si fueron rechazados mas pedidos que los aceptados

2. Generar una nueva columna que indique para cada fila si el tipo de procedimiento es UNHCR

3. Generar una nueva columna con la cantidad de pedidos rechazados o con proteccion complementaria

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Ordenando los datos según valores: función `arrange()`

Si quiero ordenar una tabla según los valores de una o más variables puedo

&gt; `arrange(dataset, columna)`

Por ejemplo, si quiero saber cuales fueron los años y países con mas pedidos de asilo


```r
arrange(decisiones, desc(Reconocidas))
```

```
## # A tibble: 164 x 7
##     Anio `Codigo Pais Or~ Reconocidas Rechazadas `Proteccion Com~
##    &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;
##  1  2019 VEN                      578        171                0
##  2  2018 VEN                      390        191                0
##  3  2012 COL                      120          0                0
##  4  2017 VEN                      102        412                0
##  5  2019 CUB                       79         59                0
##  6  2014 COL                       71        104                0
##  7  2015 VEN                       71         51                0
##  8  2018 CUB                       70         96                0
##  9  2016 VEN                       64         69                0
## 10  2015 COL                       59         89                0
## # ... with 154 more rows, and 2 more variables: `Cerradas de otra forma` &lt;dbl&gt;,
## #   total &lt;dbl&gt;
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Combinando funciones

Queremos: 

&gt; Una tabla de las decisiones tomadas por Perú frente a pedidos de asilo, ordenada por la cantidad de total de pedidos por país cada año.

Podemos obtenerla así:


```r
decisiones_venezuela &lt;- filter(decisiones, `Codigo Pais Origen` == "VEN")
decisiones_venezuela &lt;- mutate(decisiones_venezuela,
                               total = Reconocidas + 
                                 `Proteccion Complementaria` + 
                                 `Cerradas de otra forma` + Rechazadas)
decisiones_venezuela &lt;- arrange(decisiones_venezuela, desc(total))
```

Pero estamos repitiendo demasiadas veces la variable venezuela, existe una herramienta que nos ayuda a combinar funciones encadenadas:

&lt;center&gt;pipe (o tubo)&lt;/center&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Combinando funciones

&lt;img src="img/diagrama_pipe.png"  width="900"&gt;

---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Combinando funciones con pipe

&lt;center&gt;
&lt;img src="img/estoesunpipe.png" alt="Hex stickers" width="250"&gt;
&lt;/center&gt;

Si reemplazamos los tubos por esto `%&gt;%` obtenemos el resultado deseado


```r
decisiones %&gt;%
  filter(`Codigo Pais Origen` == "VEN") %&gt;%
  mutate(total = Reconocidas + `Proteccion Complementaria` + `Cerradas de otra forma` + Rechazadas) %&gt;%
  arrange(desc(total))
```

```
## # A tibble: 11 x 7
##     Anio `Codigo Pais Or~ Reconocidas Rechazadas `Proteccion Com~
##    &lt;dbl&gt; &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;
##  1  2019 VEN                      578        171                0
##  2  2018 VEN                      390        191                0
##  3  2017 VEN                      102        412                0
##  4  2016 VEN                       64         69                0
##  5  2015 VEN                       71         51                0
##  6  2014 VEN                        5         14                0
##  7  2009 VEN                        5          0                0
##  8  2011 VEN                        5          0                0
##  9  2012 VEN                        5          5                0
## 10  2007 VEN                        5          0                0
## 11  2008 VEN                        5          0                0
## # ... with 2 more variables: `Cerradas de otra forma` &lt;dbl&gt;, total &lt;dbl&gt;
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

**Encuesta:** [https://PollEv.com/multiple_choice_polls/pb0m4Fh9kGkLRYKSmIsCq/respond](https://PollEv.com/multiple_choice_polls/pb0m4Fh9kGkLRYKSmIsCq/respond)

Cómo modificarias `decisiones` para que contenga las decisiones correspondientes a 
pedidos de colombian@s ordenadas por cantidad de rechazos?

a)

```r
decisiones &lt;- decisiones %&gt;%
  filter(decisiones, `Codigo Pais Origen` == "COL") %&gt;%
  arrange(decisiones, desc(Rechazadas))
```
b)

```r
decisiones &lt;- decisiones %&gt;%
  filter(`Codigo Pais Origen` == "COL") %&gt;%
  arrange(desc(Rechazadas))
```
c)

```r
decisiones %&gt;%
  filter(`Codigo Pais Origen` == "COL") %&gt;%
  arrange(desc(Rechazadas))
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Resumir datos: `group_by` y `summarise` 

Para agrupar los datos usamos `group_by()`

Supongamos que queremos saber cuantos asilos aceptados en total corresponden a cada país de origen

.pull-left[

```r
decisiones 
```
.


![](img/tibblegroupby1.png)
]
.pull-right[

```r
decisiones %&gt;%
  group_by(`Codigo Pais Origen`)
```

![](img/tibblegroupby2.png)
]

Los datos no se modifican, solo se agrega un indicador de que esta agrupado

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Resumir datos: `group_by` y `summarise` 

Una vez que están agrupados queremos elegir como resumirlo



```r
decisiones %&gt;%
  group_by(`Codigo Pais Origen`) %&gt;%
  summarise(total_aceptado = sum(Reconocidas))
```

```
## `summarise()` ungrouping output (override with `.groups` argument)
```

```
## # A tibble: 36 x 2
##    `Codigo Pais Origen` total_aceptado
##    &lt;chr&gt;                         &lt;dbl&gt;
##  1 ARG                               0
##  2 BGD                              36
##  3 BOL                              25
##  4 BRA                               5
##  5 CMR                              20
##  6 COD                               5
##  7 COL                             684
##  8 CUB                             434
##  9 DOM                              30
## 10 ECU                               0
## # ... with 26 more rows
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Resumir datos: `group_by` y `summarise` 

Cual es el TOP 3 de país de origen aceptado?

--


```r
decisiones %&gt;%
  group_by(`Codigo Pais Origen`) %&gt;%
  summarise(total_aceptado = sum(Reconocidas)) %&gt;%
  arrange(desc(total_aceptado))
```

```
## `summarise()` ungrouping output (override with `.groups` argument)
```

```
## # A tibble: 36 x 2
##    `Codigo Pais Origen` total_aceptado
##    &lt;chr&gt;                         &lt;dbl&gt;
##  1 VEN                            1235
##  2 COL                             684
##  3 CUB                             434
##  4 HTI                              81
##  5 SYR                              47
##  6 TUR                              44
##  7 BGD                              36
##  8 PSE                              35
##  9 DOM                              30
## 10 IRQ                              30
## # ... with 26 more rows
```

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## `summarise` por separado

También `summarise` solo


```r
decisiones %&gt;%
  summarise(total_aceptados = sum(Reconocidas))
```

```
## # A tibble: 1 x 1
##   total_aceptados
##             &lt;dbl&gt;
## 1            2782
```


---
&lt;div class="my-header"&gt;&lt;/div&gt;
## Tu turno 4: verbos `dplyr`

1. Obtener una tabla con la cantidad de pedidos de asilo rechazados por Perú durante cada año

2. Ordena esta tabla de mayor a menor según la cantidad de pedidos aceptados

3. Que cantidad de pedidos fueron rechazados en total durante el período estudiado?

4. Crea una nueva variable

---
&lt;div class="my-header"&gt;&lt;/div&gt;

## Resumen de esta sección:


- Seleccionamos variables con `select()`  
- Filtramos filas con `filter()`  
- Ordenamos tablas con `arrange()`  
- Hacemos tablas resumen con `summarise()`  
- Creamos nuevas variables con `mutate()`  
- Hacemos operaciones por grupos con `group_by()`
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "13:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
